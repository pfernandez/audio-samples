<main>
	
	<form class="search" ng-submit="searchText()">
		<input type="text" size="30" ng-model="text" ng-model-options="{ getterSetter: true }" 
			placeholder="{{placeholder}}" />
		<button type="submit">Search</button>
	</form>
	
	<h2 ng-if="0 <= data.count">
		{{data.count | numberWithCommas}} results found.
	</h2>
	
	<ul class="song-list"><li ng-repeat="sound in data.results track by $index">
	
		<h3>{{data.start + $index}}. {{sound.name | noExtension}}</h3>
		
		<div class="player" ng-class="{
			vol1: (sound.audio.volume > 0),
			vol2: (sound.audio.volume > 0.333),
			vol3: (sound.audio.volume > 0.667),
			vol4: (sound.audio.volume == 1)}">
			<button ng-click="play()" class="pause-play paused"
				ng-class="{paused: isPaused(sound)}">Play/Pause</button>
			<input type="range" min="0" max="1" step="0.01" class="progress"
				ng-model="sound.audio.progress">
			<span class="time">{{sound.audio.remaining | asMinutes}}</span>
			<span class="volume-icon"></span>
			<input type=range min=0 max=1 step=0.01 class="volume"
				ng-model="sound.audio.volume">
			</input>
		</div>

		<a href="{{sound.previews['preview-hq-mp3'] | trusted}}"
			download="{{sound.name}}" class="download">
			<span class="arrow">&darr;</span>mp3
		</a>
		<a href="{{sound.previews['preview-hq-ogg'] | trusted}}" 
			download="{{sound.name}}" class="download">
			<span class="arrow">&darr;</span>ogg
		</a>

		<dl>
			<dt>Contributed by:</dt>
			<dd><a href="{{sound.url}}">{{sound.username}}</a></dd>
			<br>
			<dt>Tags:</dt>
			<dd ng-repeat="tag in sound.tags">
				<button ng-click="searchText(tag)" class="tag">{{tag}}</button>
			</dd>
		</dl>
		
	</li></ul>
	<nav class="result-links">
		<div class="inner">
			<button ng-if="data.previous" class="previous"
				ng-click="goToPage(data.thisPage - 1)">
				<span class="arrow">&#9666;</span> Previous</button>
			<dir ng-if="data.count" class="nav-numbers" 
				content="navNumbers()"></dir>
			<button ng-if="data.next" class="next" ng-click="goToPage(data.thisPage + 1)">
				Next <span class="arrow">&#9656;</span></button>
		</div>
	</nav>
</main>
